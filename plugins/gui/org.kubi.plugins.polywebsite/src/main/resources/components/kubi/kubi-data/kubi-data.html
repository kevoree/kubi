<link rel="import" href="../../bower_components/polymer/polymer.html"/>

<link rel="import" href="../kubi-model/kubi-model.html"/>

<script src="/js/js/org.kubi.model-all.js"></script>
<script src="/js/js/org.kevoree.modeling.database.websocket.WebSocket.js"></script>

<script src="./kubi-data.js"></script>

<!-- canvasJS -->
<script src="../../../js/canvasjs.min.js"></script>

<dom-module id="kubi-data">
    <link rel="stylesheet" type="text/css" href="./kubi-data.css"/>
    <template>
        <kubi-model id="modelHandlerData" on-model-connected="modelConnected"></kubi-model>
        <div id="chartContainer"></div>
    </template>
</dom-module>

<script>
    Polymer({
        is: "kubi-data",
        properties: {
            time: {
                type: Number,
                observer: 'updateGraph'
            },
            scale: {
                type: Number,
                observer: 'updateGraph'
            },
            devices: {
                type: Array,
                value: ["plug"],
                observer: 'updateGraph'
            }
        },
        updateGraph: function (event) {
            if (this.time != undefined && this.scale != undefined && this.devices != undefined) {
                try {
                    updateGraphSettings(this.time, this.scale, this.devices);
                } catch (e) {
                    console.error(e);
                }

            }
        },
        ready: function () {

        },
        modelConnected : function(event, details){
            initWithModel(details.value);
        }
    });
</script>