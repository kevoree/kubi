<link rel="import" href="../../bower_components/polymer/polymer.html"/>

<link rel="import" href="../kubi-model/kubi-model.html"/>

<script src="/js/js/org.kubi.model-all.js"></script>
<script src="/js/js/org.kevoree.modeling.drivers.websocket.js"></script>

<script type="text/javascript" src="/js/paperclip.js"></script>


<script src="./kubi-sidedevicepicker.js"></script>


<dom-module id="kubi-sidedevicepicker">
    <template>
        <div>
            <kubi-model id="modelHandlerSide" on-model-connected="modelConnected"></kubi-model>

            <form id="radioDevicePicker" action="#" on-change="devicepickerUpdatesGraph"></form>
        </div>
    </template>
</dom-module>

<script>
    Polymer({
        is: "kubi-sidedevicepicker",
        value : ["plug"],
        devicepickerUpdatesGraph : function(event){
            this.value = [];
            var devicePickerForm = this.$.radioDevicePicker;
            for(var i= 0; i<devicePickerForm.length ; i++){
                if (devicePickerForm[i].checked) {
                    this.value[this.value.length] = devicePickerForm[i].value;
                }
            }
            this.fire("devicepicker-updated", {value : this.value});
        },
        modelConnected : function(event, details){
            setModelForTemplate(details.value);
            initTemplate("radioDevicePicker", 0, (new Date()).getTime());
        },
        ready : function (){

        }

    });
</script>
